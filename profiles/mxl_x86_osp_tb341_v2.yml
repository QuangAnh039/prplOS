---
profiles:
  - PRPL_OSP_TB341_v2
target: intel_x86
subtarget: lgm
external_target: True
description: Build images for the Maxlinear x86 devices - OSP TB341 v2
             This target requires sources from MaxLinear, that are accessible via
             git.maxlinear.com.
             For reference boards, source code access and reporting issues,
             please check https://gitlab.com/prpl-foundation/prplos/prplos/-/wikis/MaxLinear-Open-Service-Platform
feeds:
  - name: intel_x86
    uri: https://github.com/maxlinear/feed_target_x86.git
    tracking_branch: updk_9.2.3
    revision: 6f957b00b629afb44b918fdd48fe4c36c99712a8
  - name: rootfs
    uri: https://github.com/maxlinear/rootfs.git
    tracking_branch: updk_9.2.3
    revision: 752c19caabca086b4d617481b5d0150253c791ed
  - name: eip
    uri: https://github.com/maxlinear/feed_eip.git
    tracking_branch: updk_9.2.3
    revision: 5867aa97084a894e43f2ddda950a0d2ca39077d0
  - name: mcast_service
    uri: https://github.com/maxlinear/feed_mcast_service.git
    tracking_branch:  updk_9.2.3
    revision: 45e3296ae88a1314b8d952b908436b4e0f872004
  - name: datapath
    uri: https://github.com/maxlinear/feed_datapath.git
    tracking_branch: updk_9.2.3
    revision: d76575ed67719c0129c1f8defcc3976f2c9f9f8d
  - name: gphy_firmware
    uri: https://github.com/maxlinear/feed_gphy_firmware.git
    tracking_branch: updk_9.2.3
    revision: 96ee76b6d91aee7c8ba616e687d4be1be07d6a55
  - name: gwdpa_dpm
    uri: https://github.com/maxlinear/feed_gwdpa-dpm.git
    tracking_branch: updk_9.2.3
    revision: deb0e22bc9ce493de613d80f3606b9856d0a0e74
  - name: misc
    uri: https://github.com/maxlinear/feed_common.git
    tracking_branch: updk_9.2.3
    revision: 4ae22251d758a2dcd6d5b60b135d3bccda57b8a9
  - name: opensource_apps_prpl
    uri: https://github.com/maxlinear/feed_opensource_apps_prpl.git
    tracking_branch: updk_9.2.3
    revision: afef79332ea676367030bf9e2f1cff4fb79a8d49
  - name: packet_learn
    uri: https://github.com/maxlinear/feed_packet_learn.git
    tracking_branch: updk_9.2.3
    revision: b9796144e44dd21d733fda1831a40fa4f295151b
  - name: pon
    uri: https://github.com/maxlinear/feed_pon.git
    tracking_branch: updk_9.2.3
    revision: e30bdebb945cffec97af198ec8f8bb0300cc46f4
  - name: ppa
    uri: https://github.com/maxlinear/feed_ppa.git
    tracking_branch: updk_9.2.3
    revision: cc660879817213770818b425a111cfa3326279aa
  - name: pp_net_adapter
    uri: https://github.com/maxlinear/feed_pp_net_adapter.git
    tracking_branch: updk_9.2.3
    revision: 22fe30aecf6841e6dbf6758f4cb543416a2f19d0
  - name: vpn_fw
    uri: https://github.com/maxlinear/feed_vpn_fw.git
    tracking_branch:  updk_9.2.3
    revision: 2e0ff4f40ab60217b13c293408d59365220c5a20
  - name: qos
    uri: https://github.com/maxlinear/feed_qos_tc.git
    tracking_branch:  updk_9.2.3
    revision: 9bbf8bbc292747255b905ee964d00aa9c9a5bed9
  - name: utils
    uri: https://github.com/maxlinear/feed_mxl_utils.git
    tracking_branch:  updk_9.2.3
    revision: d82b27f1ca167d8735964af7f2676933b615cbf4
  - name: bootloader
    uri: https://github.com/maxlinear/feed_uboot.git
    tracking_branch:  updk_9.2.3
    revision: 2d6cd785f5fb3d2ce280d68726988a086f31fd4a
  - name: dpl
    uri: https://github.com/maxlinear/feed_dpl.git
    tracking_branch:  updk_9.2.3
    revision: 368b288ffd2dee37e574a6edeb3b90e01962d026
  - name: speedtest
    uri: https://github.com/maxlinear/speedtest.git
    tracking_branch:  updk_9.2.3
    revision: d050e55046b7f13d4542599f6f1ff4f017458f8a
  - name: mxl_sdk
    uri: https://github.com/maxlinear/feed_mxl_sdk.git
    tracking_branch:  updk_9.2.3
    revision: ba12f43886a2ab1563738d56acd21cdfbaf4a9f7
  - name: system_service
    uri: https://github.com/maxlinear/feed_system_service.git
    tracking_branch:  updk_9.2.3
    revision: 52eb2d11ad95a1c3a5dafad2715323090cf139a2

packages:
  - efr32-boot-config
  - kmod-mxl_eth_drv
  - kmod-mxl-xpcs
  - kmod-gwdpa-dpm
  - kmod-pp_net_adapter
  - kmod-packet_learn
  - blockd
  - kmod-phy-lgm-usb
  - kmod-usb-acm
  - kmod-usb-dwc3-intel
  - kmod-usb-net-cdc-mbim
  - kmod-usb-printer
  - kmod-usb-storage-uas
  - kmod-usb-xhci-hcd
  - kmod-usb3
  - ppv4-firmware-lgm
  - kmod-intel_ppv4_fw_lgm
  - kmod-intel-extmark-x86
  - kmod-ppv4
  - kmod-p34x_phy_fwdl
  - mxl-gphy-fw-lgm
  - e2fsprogs
  - kmod-directconnect-dp
  - kmod-ppa-drv
  - kmod-ppa-drv-accel
  - kmod-ppa-drv-gre
  - kmod-ppa-drv-lgm
  - kmod-ppa-drv-stack-al
  - ppacmd
  - kmod-mxl_vpn
  - kmod-mxl_lgm_toe
  - kmod-ipsec4
  - kmod-ipsec6
  - kmod-ipsec
  - eip197-firmware
  - kmod-safexcel
  - vpn-firmware-lgm
  - kmod-ipsec4-offload
  - kmod-ipsec6-offload
  - pon-libnl
  - gpon-omci-onu-binary
  - pon-mcc-lib
  - pon-lib
  - pon-net-lib
  - pon-img-lib
  - pon-tools
  - base-files-platform-lgm
  - pon-base-files
  - pon-base-files-debug
  - pon-base-files-prpl
  - pon-lib-cli
  - pon-lib-daemon
  - ponmbox-cli
  - pon-gpon-firmware-urx-b
  - pon-xpon-firmware-urx-b
  - pon-serdes-firmware-urx-b
  - kmod-pon-mbox-drv-eth
  - kmod-dp-eth-reinsert
  - kmod-pon-mcc-drv
  - kmod-pon-mcc-drv-filter
  - kmod-mxl_pon_hgu_vuni_lgm
  - kmod-ebt-prio
  - ethtool-full
  - base-files-prpl
  - ppmd-bin
  - pm-util
  - map
  - kmod-intel-qos
  - kmod-qos-tc
  - partx-utils
  - obudpst
  - speedtest-modules
  - kmod-dpl
  - kmod-mxl_gpy
  - libugwhelper
  - libmsgapi
  - sse_fapi_lgm
  - sse_fapi_lgm-sse_test_app
  - kmod-mcast-helper

diffconfig: |
  CONFIG_DEVEL=y
  CONFIG_EXTRA_OPTIMIZATION="-fno-caller-saves -fno-plt -Wno-error=deprecated-declarations -Wno-error=address"
  CONFIG_KERNEL_GIT_CLONE_URI="https://github.com/maxlinear/linux.git"
  CONFIG_KERNEL_GIT_REF="UPDK_9.2.3_CELL_MODULE_FIX"
  CONFIG_GPON_OMCI_ONU_UBUS_INTERFACE=y
  CONFIG_TARGET_MULTI_PROFILE=y
  CONFIG_TARGET_PER_DEVICE_ROOTFS=y
  CONFIG_TARGET_DEVICE_intel_x86_lgm_DEVICE_PRPL_OSP_v2=y
  # CONFIG_TARGET_ROOTFS_EXT4FS is not set
  CONFIG_BUILD_LOG=y
  CONFIG_PACKAGE_uboot-octopus-urx641-overlay-fit-p34x-phy-emmc-prpl=y
  CONFIG_PACKAGE_uboot-octopus-urx641-4GB-ddr-overlay-fit-p34x-phy-emmc-prpl=y
  CONFIG_VERSION_FILENAMES=n
  CONFIG_VERSION_CODE_FILENAMES=n
  # CONFIG_PACKAGE_bios_images is not set
  CONFIG_BUILD_SDK="prplos"
  CONFIG_BUSYBOX_CUSTOM=y
  CONFIG_BUSYBOX_CONFIG_TFTPD=y
  CONFIG_BUSYBOX_CONFIG_FEATURE_TFTP_GET=y
  CONFIG_BUSYBOX_CONFIG_FEATURE_TFTP_PUT=y
  CONFIG_BUSYBOX_CONFIG_TFTP=y
  CONFIG_LGM_EIP123_SUPPORT=y
  CONFIG_KERNEL_FTRACE=y
