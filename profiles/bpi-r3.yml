---
description: Banana Pi R3 (MediaTek MT7986A) with prplOS (public feeds)
target: mediatek
subtarget: filogic
external_target: False

profiles:
  - bpi-r3
feeds:
  - name: feed_mediatek
    uri: https://gitlab.com/prpl-foundation/prplos/feeds/feed-mediatek
    revision: main@3b9dd8fe98707217963f3202c6b39777309dcdfe

packages:
  # Basic system packages
  - base-files
  - busybox
  - dropbear
  - firewall4
  - kmod-usb-storage
  - kmod-fs-ext4
  - kmod-fs-vfat
  - block-mount

  # MediaTek/BPI-R3 specific
  - uboot-envtools
  - kmod-mt7986-firmware
  - kmod-mt7915e
  - kmod-phy-aquantia

  # Network tools
  - iperf3
  - ethtool
  - tcpdump
 
  # Network tools
  - libudebug
diffconfig: |
  CONFIG_TARGET_mediatek=y
  CONFIG_TARGET_mediatek_filogic=y
  CONFIG_TARGET_mediatek_filogic_DEVICE_bananapi_bpi-r3=y

  # Boot from SD card
  CONFIG_TARGET_ROOTFS_EXT4FS=y
  CONFIG_TARGET_ROOTFS_PARTSIZE=512
  CONFIG_TARGET_IMAGES_GZIP=y
  CONFIG_TARGET_KERNEL_PARTSIZE=64

  # SD card boot support
  CONFIG_BANANAPI_BPI_R3_SDCARD=y

  # USB support
  CONFIG_PACKAGE_kmod-usb2=y
  CONFIG_PACKAGE_kmod-usb3=y
  CONFIG_PACKAGE_kmod-usb-storage=y
  CONFIG_PACKAGE_kmod-fs-ext4=y
  CONFIG_PACKAGE_kmod-fs-vfat=y
  CONFIG_PACKAGE_block-mount=y

  # Network features
  CONFIG_PACKAGE_firewall4=y
  # CONFIG_PACKAGE_dnsmasq is not set

  # WiFi support
  CONFIG_PACKAGE_kmod-mt7915e=y
  CONFIG_PACKAGE_kmod-mt7986-firmware=y
  CONFIG_PACKAGE_hostapd-common=y
  CONFIG_PACKAGE_wpad-basic-mbedtls=y
  CONFIG_PACKAGE_libudebug=y
  CONFIG_PACKAGE_udebug=y
  CONFIG_PACKAGE_libubox=y
  # Ethernet
  CONFIG_PACKAGE_kmod-phy-aquantia=y

  # prplOS branding
  CONFIG_VERSION_DIST="prplOS"
  CONFIG_VERSION_MANUFACTURER="prpl Foundation"
  CONFIG_VERSION_HOME_URL="https://prplfoundation.org"

